<index.html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Homes - Real Estate Phuket</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Poppins', 'Sarabun', sans-serif; color: #374151; }
        .container { max-width: 1280px; }

        #loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #fff; display: flex;
            flex-direction: column; align-items: center; justify-content: center;
            z-index: 9999; opacity: 1; visibility: visible;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        #loading-overlay.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        #loading-overlay img { max-width: 200px; }

        .page-content-section { display: none; }
        .page-content-section.active { display: block; }
        
        .hero-background {
            position: relative; height: 85vh; min-height: 600px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; color: white; overflow: hidden;
        }
        #hero-video {
            position: absolute; top: 50%; left: 50%;
            width: 100%; height: 100%; object-fit: cover;
            transform: translate(-50%, -50%); z-index: 1;
        }
        .hero-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 2; }
        
        /* New Hero Search Form */
        #hero-search-form-container {
            position: relative; z-index: 3;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 2rem;
            width: 90%;
            max-width: 800px;
        }
        .hero-search-tabs button {
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.7);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        .hero-search-tabs button.active {
            color: white;
            border-bottom-color: white;
        }

        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 2000; backdrop-filter: blur(5px);
            align-items: center; justify-content: center;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: white; border-radius: 16px; max-width: 600px;
            width: 90%; max-height: 90vh; overflow-y: auto; position: relative;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            animation: modal-enter 0.3s forwards ease-out;
        }
        @keyframes modal-enter { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        /* Agent Card Style */
        .agent-card {
            background: white;
            border-radius: 1rem;
            overflow: hidden;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        .agent-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.1);
        }
        .agent-card img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: -60px auto 0;
            border: 5px solid white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
    </style>
</head>
<body class="bg-gray-100">

    <div id="loading-overlay">
        <img src="Textt1.png" alt="Mermaid Homes Logo" onerror="this.onerror=null;this.src='https://placehold.co/200x60?text=Mermaid+Homes';">
    </div>
    <div id="notification"></div>

    <header class="bg-white shadow-sm py-2 sticky top-0 z-50">
       <div class="container mx-auto px-4 flex justify-between items-center">
            <a href="#hero-section" class="flex items-center space-x-3 nav-link">
                <img src="Textt1.png" alt="Mermaid Homes Logo" class="h-16 w-auto" onerror="this.onerror=null;this.src='https://placehold.co/150x40?text=Mermaid+Homes';">
            </a>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#properties" class="nav-link text-gray-600 hover:text-gray-900 font-medium" data-translate-key="nav_properties">Properties</a>
                <a href="#agents" class="nav-link text-gray-600 hover:text-gray-900 font-medium" data-translate-key="nav_agents">Our Agents</a>
                <a href="#roi-calculator" class="nav-link text-gray-600 hover:text-gray-900 font-medium" data-translate-key="nav_roi">ROI Calculator</a>
                <a href="#post-property-listing" class="nav-link mermaid-accent text-white font-medium py-2 px-4 rounded-lg" data-translate-key="nav_post_property">Post Property</a>
            </nav>
            <div class="flex items-center">
                <div id="lang-switcher" class="mr-4">
                    <button data-lang="en" class="lang-btn font-semibold p-1">EN</button>
                    <span class="text-gray-300">|</span>
                    <button data-lang="th" class="lang-btn text-gray-400 p-1">TH</button>
                </div>
                <button id="mobile-menu-button" class="md:hidden text-gray-600">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
             <a href="#properties" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_properties">Properties</a>
             <a href="#agents" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_agents">Our Agents</a>
             <a href="#roi-calculator" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_roi">ROI Calculator</a>
             <a href="#post-property-listing" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_post_property">Post Property</a>
        </div>
    </header>

    <main id="main-content">
        <!-- Home Page Section -->
        <section id="hero-section" class="page-content-section hero-background">
             <div class="hero-overlay"></div>
             <video autoplay loop muted playsinline id="hero-video" poster="https://placehold.co/1920x1080/8d6e63/ffffff?text=Mermaid+Homes">
                 <source src="Video opening.mp4" type="video/mp4">
             </video>
             <!-- New Hero Search -->
             <div id="hero-search-form-container">
                 <div class="hero-search-tabs flex justify-center mb-4">
                     <button id="hero-search-buy-btn" class="active" data-translate-key="filter_for_sale">For Sale</button>
                     <button id="hero-search-rent-btn" data-translate-key="filter_for_rent">For Rent</button>
                 </div>
                 <form id="hero-search-form" class="flex flex-col md:flex-row gap-2">
                     <input type="text" id="hero-search-input" class="flex-grow p-4 rounded-lg text-gray-800" data-translate-placeholder="hero_search_placeholder" placeholder="Enter area, building, or community">
                     <button type="submit" class="p-4 mermaid-accent text-white font-bold rounded-lg flex items-center justify-center">
                         <i class="fas fa-search mr-2"></i>
                         <span data-translate-key="search_btn">Search</span>
                     </button>
                 </form>
             </div>
        </section>
        
        <!-- Properties Page Section -->
        <section id="properties" class="page-content-section py-12 md:py-20 bg-gray-50">
             <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-10 text-gray-800" data-translate-key="properties_title">Property Listings</h2>
                <!-- Filter UI remains the same, but now includes 'Category' -->
                <div class="bg-white p-6 rounded-xl shadow-md mb-12 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 items-end">
                    <!-- Location Filter -->
                    <div>
                        <label for="location-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_location">Location</label>
                        <select id="location-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                            <option value="" data-translate-key="filter_all_areas">All Areas</option>
                        </select>
                    </div>
                    <!-- Category Filter -->
                    <div>
                        <label for="category-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_category">Category</label>
                        <select id="category-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                            <option value="" data-translate-key="filter_all_categories">All Categories</option>
                        </select>
                    </div>
                    <!-- Other filters -->
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="properties-grid"></div>
            </div>
        </section>

        <!-- New: Meet Our Agents Section -->
        <section id="agents" class="page-content-section py-12 md:py-20 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-10 text-gray-800" data-translate-key="agents_title">Meet Our Agents</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-16" id="agents-grid">
                    <!-- Agent cards will be injected here -->
                </div>
            </div>
        </section>
        
    </main>

    <!-- The rest of the HTML and Modals remain largely the same -->
    
<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- DATA STORE ---
    let propertiesData = [
        { id: 'anchan-11012', title: 'Anchan Luxury Villas', type: 'Sale', category: 'Villa', location: 'Thalang', bedrooms: 3, bathrooms: 4, area: 473, priceTHB: 32837000, description: 'Experience ultimate luxury at Anchan Villa...', agentCode: 'AG-PROJ-01', images: ['Anchan1 (1).jpg', 'Anchan2.jpg', 'Anchan3.jpg'] },
        { id: 'trichada-rent', title: 'Trichada Pool Villa', type: 'Rent', category: 'Villa', location: 'Bangtao Beach', bedrooms: 3, bathrooms: 2, area: 200, priceTHB: 170000, description: 'Spacious 3-bedroom pool villa, move-in ready!', agentCode: 'AG-RENT-02', images: ['T0.jpg', 'T1.jpg', 'T2.jpg'] },
        { id: 'botanica-grand', title: 'Botanica Grand Avenue', type: 'Sale', category: 'Villa', location: 'Cherngtalay', bedrooms: 4, bathrooms: 5, area: 520, priceTHB: 58100000, description: 'The epitome of opulence by Botanica Luxury Villas.', agentCode: 'AG-PROJ-03', images: ['https://placehold.co/800x600/a1887f/ffffff?text=Botanica+1'] },
        { id: 'the-base-height', title: 'The Base Height Condo', type: 'Sale', category: 'Condo', location: 'Phuket Town', bedrooms: 1, bathrooms: 1, area: 34, priceTHB: 2500000, description: 'Modern condo in the heart of Phuket Town, perfect for city living.', agentCode: 'AG-SALE-05', images: ['https://placehold.co/800x600/455a64/ffffff?text=Condo+1'] }
    ];

    const agentsData = [
        { name: 'Nattasha B.', title: 'Real Estate Agent', img: 'https://placehold.co/200x200/d7ccc8/333333?text=Agent+1', phone: '+66812345678', email: 'nattasha.b@mermaid.com' },
        { name: 'Michael Chen', title: 'Sales Director', img: 'https://placehold.co/200x200/d7ccc8/333333?text=Agent+2', phone: '+66823456789', email: 'michael.c@mermaid.com' },
        { name: 'Anna Petrova', title: 'Rental Specialist', img: 'https://placehold.co/200x200/d7ccc8/333333?text=Agent+3', phone: '+66834567890', email: 'anna.p@mermaid.com' },
        { name: 'David Wilson', title: 'Investment Advisor', img: 'https://placehold.co/200x200/d7ccc8/333333?text=Agent+4', phone: '+66845678901', email: 'david.w@mermaid.com' }
    ];

    // --- DOM ELEMENT SELECTORS ---
    const allElements = {
        // ... (all previous selectors)
        heroSearchForm: document.getElementById('hero-search-form'),
        heroSearchInput: document.getElementById('hero-search-input'),
        heroSearchBuyBtn: document.getElementById('hero-search-buy-btn'),
        heroSearchRentBtn: document.getElementById('hero-search-rent-btn'),
        agentsGrid: document.getElementById('agents-grid'),
        categoryFilter: document.getElementById('category-filter')
    };
    
    // --- FUNCTIONS ---
    
    const renderAgentCards = () => {
        allElements.agentsGrid.innerHTML = '';
        agentsData.forEach(agent => {
            const card = document.createElement('div');
            card.className = 'agent-card';
            card.innerHTML = `
                <div class="h-28 mermaid-accent"></div>
                <div class="p-6">
                    <img src="${agent.img}" alt="${agent.name}">
                    <h3 class="text-xl font-bold mt-4 text-gray-800">${agent.name}</h3>
                    <p class="text-gray-500 mb-4">${agent.title}</p>
                    <div class="flex justify-center space-x-4">
                        <a href="tel:${agent.phone}" class="text-gray-400 hover:text-gray-800"><i class="fas fa-phone"></i></a>
                        <a href="mailto:${agent.email}" class="text-gray-400 hover:text-gray-800"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
            `;
            allElements.agentsGrid.appendChild(card);
        });
    };

    const handleHeroSearch = (e) => {
        e.preventDefault();
        const searchTerm = allElements.heroSearchInput.value.toLowerCase();
        const searchType = allElements.heroSearchBuyBtn.classList.contains('active') ? 'Sale' : 'Rent';
        
        // Set the main filters on the properties page
        allElements.typeFilter.value = searchType;
        allElements.locationFilter.value = ''; // Reset location for keyword search
        
        // This is a simplified keyword search. A real site would be more complex.
        const filteredByKeyword = propertiesData.filter(p => 
            p.title.toLowerCase().includes(searchTerm) ||
            p.location.toLowerCase().includes(searchTerm) ||
            p.description.toLowerCase().includes(searchTerm)
        );

        // Render the keyword-filtered results
        renderPropertyCards(filteredByKeyword.filter(p => p.type === searchType));
        
        // Navigate to the properties section
        showPage('properties');
        history.pushState(null, '', '#properties');
    };

    const populateCategoryFilter = () => {
        const categories = [...new Set(propertiesData.map(p => p.category))];
        allElements.categoryFilter.innerHTML = `<option value="" data-translate-key="filter_all_categories">${translations[currentLang].filter_all_categories || 'All Categories'}</option>`;
        categories.sort().forEach(cat => {
            const option = document.createElement('option');
            option.value = cat;
            option.textContent = cat;
            allElements.categoryFilter.appendChild(option);
        });
    };

    const filterAndRenderProperties = () => {
        let filtered = [...propertiesData];
        if (allElements.locationFilter.value) filtered = filtered.filter(p => p.location === allElements.locationFilter.value);
        if (allElements.categoryFilter.value) filtered = filtered.filter(p => p.category === allElements.categoryFilter.value); // New filter
        if (allElements.typeFilter.value) filtered = filtered.filter(p => p.type === allElements.typeFilter.value);
        if (allElements.bedroomsFilter.value) filtered = filtered.filter(p => p.bedrooms >= parseInt(allElements.bedroomsFilter.value));
        if (allElements.maxPriceFilter.value) filtered = filtered.filter(p => p.priceTHB <= parseFloat(allElements.maxPriceFilter.value));
        renderPropertyCards(filtered);
    };

    // --- EVENT LISTENERS ---
    
    allElements.heroSearchForm.addEventListener('submit', handleHeroSearch);
    allElements.heroSearchBuyBtn.addEventListener('click', () => {
        allElements.heroSearchBuyBtn.classList.add('active');
        allElements.heroSearchRentBtn.classList.remove('active');
    });
    allElements.heroSearchRentBtn.addEventListener('click', () => {
        allElements.heroSearchRentBtn.classList.add('active');
        allElements.heroSearchBuyBtn.classList.remove('active');
    });

    allElements.applyFilterBtn.addEventListener('click', filterAndRenderProperties);

    // --- INITIALIZATION ---
    renderAgentCards();
    populateCategoryFilter();
    // The rest of the initialization from the previous version remains
    // ... setLanguage('en'), showPage(...), populateLocationFilter(), etc.
});
</script>

</body>
</html>
