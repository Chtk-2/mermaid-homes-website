<index.html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Homes - Real Estate Phuket</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;500;600;700&family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Sarabun', 'Josefin Sans', sans-serif; color: #5d4037; }
        .container { max-width: 1280px; }

        #loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(255, 255, 255, 0.95); display: flex;
            flex-direction: column; align-items: center; justify-content: center;
            z-index: 9999; opacity: 1; visibility: visible;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        #loading-overlay.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        #loading-overlay img { max-width: 150px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(0.95); } 50% { transform: scale(1); } }

        .page-content-section { display: none; }
        .page-content-section.active { display: block; }
        
        .hero-background {
            position: relative; height: 85vh; min-height: 600px;
            display: flex; align-items: center; justify-content: center;
            text-align: center; color: white; overflow: hidden;
        }
        #hero-video {
            position: absolute; top: 50%; left: 50%;
            width: 100%; height: 100%; object-fit: cover;
            transform: translate(-50%, -50%); z-index: 1;
        }
        .hero-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 2; }
        .hero-content { position: relative; z-index: 3; }
        .floating-animation { animation: float 6s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-20px); } }

        .beige-secondary { background-color: #efebe9; }
        .mermaid-accent { background: linear-gradient(135deg, #4db6ac, #26a69a); }

        .add-listing-btn, .whatsapp-float {
            position: fixed; bottom: 30px; width: 60px; height: 60px;
            border-radius: 50%; color: white; font-size: 24px;
            display: flex; align-items: center; justify-content: center;
            z-index: 1000; transition: all 0.3s ease; box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        .add-listing-btn { right: 30px; background: linear-gradient(135deg, #4db6ac, #26a69a); }
        .whatsapp-float { left: 30px; background: #25D366; }
        .add-listing-btn:hover, .whatsapp-float:hover { transform: scale(1.1); }

        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 2000; backdrop-filter: blur(5px);
            align-items: center; justify-content: center;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: white; border-radius: 16px; max-width: 600px;
            width: 90%; max-height: 90vh; overflow-y: auto; position: relative;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            animation: modal-enter 0.3s forwards ease-out;
        }
        @keyframes modal-enter { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .property-card { position: relative; }
        .delete-property-btn {
            position: absolute; top: 10px; right: 10px;
            background-color: rgba(220, 53, 69, 0.8); color: white;
            border-radius: 50%; width: 30px; height: 30px;
            display: flex; align-items: center; justify-content: center;
            border: none; cursor: pointer; transition: all 0.2s;
            opacity: 0;
        }
        .property-card:hover .delete-property-btn { opacity: 1; }
        .delete-property-btn:hover { background-color: rgba(220, 53, 69, 1); transform: scale(1.1); }

        #notification {
            position: fixed; top: 20px; left: 50%;
            padding: 1rem 2rem; border-radius: 8px; color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 9999;
            opacity: 0; visibility: hidden; transition: all 0.3s ease; transform: translate(-50%, -20px);
        }
        #notification.show { opacity: 1; visibility: visible; transform: translate(-50%, 0); }
        #notification.success { background-color: #28a745; }
        #notification.error { background-color: #dc3545; }
    </style>
</head>
<body class="bg-gray-100">

    <div id="loading-overlay">
        <img src="logo1.jpg" alt="Mermaid Homes Logo" onerror="this.onerror=null;this.src='https://placehold.co/150x150/d7ccc8/5d4037?text=Logo';">
        <div data-translate-key="loading" class="text-beige-dark text-xl font-semibold">Loading Mermaid Homes...</div>
    </div>
    <div id="notification"></div>

    <header class="bg-white shadow-sm py-4 sticky top-0 z-50">
       <div class="container mx-auto px-4 flex justify-between items-center">
            <a href="#hero-section" class="flex items-center space-x-3 nav-link">
                <img src="logo1.jpg" alt="Mermaid Homes Logo" class="h-10 w-auto" onerror="this.onerror=null;this.src='https://placehold.co/40x40?text=M';">
                <div>
                    <span class="text-xl md:text-2xl font-bold text-gray-800">Mermaid Homes</span>
                    <p data-translate-key="phuket_thailand" class="text-xs text-gray-500">Phuket, Thailand</p>
                </div>
            </a>
            <nav class="hidden md:flex items-center space-x-6">
                <a href="#properties" class="nav-link text-gray-600 hover:text-gray-900" data-translate-key="nav_properties">Properties</a>
                <a href="#post-property-listing" class="nav-link text-gray-600 hover:text-gray-900" data-translate-key="nav_post_property">Post Property</a>
                <a href="#roi-calculator" class="nav-link text-gray-600 hover:text-gray-900" data-translate-key="nav_roi">ROI Calculator</a>
            </nav>
            <div class="flex items-center">
                <div id="lang-switcher" class="mr-4">
                    <button data-lang="en" class="lang-btn font-semibold p-1">EN</button>
                    <span class="text-gray-300">|</span>
                    <button data-lang="th" class="lang-btn text-gray-400 p-1">TH</button>
                </div>
                <button id="mobile-menu-button" class="md:hidden text-gray-600">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
             <a href="#properties" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_properties">Properties</a>
             <a href="#post-property-listing" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_post_property">Post Property</a>
             <a href="#roi-calculator" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_roi">ROI Calculator</a>
        </div>
    </header>

    <main id="main-content">
        <!-- Home Page Section -->
        <section id="hero-section" class="page-content-section hero-background">
             <div class="hero-overlay"></div>
             <video autoplay loop muted playsinline id="hero-video" poster="https://placehold.co/1920x1080/8d6e63/ffffff?text=Mermaid+Homes">
                 <source src="Video opening.mp4" type="video/mp4">
             </video>
             <div class="hero-content floating-animation max-w-4xl px-4">
                <h1 class="text-4xl md:text-6xl font-bold mb-4 leading-tight" data-translate-key="hero_title">Real Estate Phuket</h1>
                <p class="text-2xl md:text-3xl font-light mb-6" data-translate-key="hero_subtitle">Thailand best luxury homes | Sell and Rent üè°</p>
                <p class="text-lg md:text-xl mb-8 text-gray-200" data-translate-key="hero_description">Explore the Island‚Äôs property with us</p>
                <a href="#properties" class="nav-link bg-white text-gray-800 font-semibold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105 text-lg" data-translate-key="browse_properties">
                    Browse Properties
                </a>
            </div>
        </section>
        
        <!-- Properties Page Section -->
        <section id="properties" class="page-content-section py-12 md:py-20 beige-secondary">
             <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-10 text-gray-800" data-translate-key="properties_title">Property Listings</h2>
                <div class="bg-white p-6 rounded-xl shadow-md mb-12 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 items-end">
                    <div>
                        <label for="location-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_location">Location</label>
                        <select id="location-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                            <option value="" data-translate-key="filter_all_areas">All Areas</option>
                        </select>
                    </div>
                    <div>
                        <label for="type-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_type">Type</label>
                        <select id="type-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                            <option value="" data-translate-key="filter_all_types">All Types</option>
                            <option value="Sale" data-translate-key="filter_for_sale">For Sale</option>
                            <option value="Rent" data-translate-key="filter_for_rent">For Rent</option>
                        </select>
                    </div>
                    <div>
                        <label for="bedrooms-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_bedrooms">Bedrooms</label>
                        <select id="bedrooms-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm">
                            <option value="" data-translate-key="filter_any">Any</option>
                            <option value="1">1+</option><option value="2">2+</option><option value="3">3+</option><option value="4">4+</option><option value="5">5+</option>
                        </select>
                    </div>
                    <div>
                        <label for="max-price-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_max_price">Max Price</label>
                        <input type="number" id="max-price-filter" data-translate-placeholder="filter_price_placeholder" placeholder="e.g. 50000000" class="w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <button id="apply-filter-btn" class="w-full mermaid-accent text-white font-bold py-2 px-4 rounded-md hover:opacity-90 transition-opacity">
                        <i class="fas fa-search mr-2"></i><span data-translate-key="search_btn">Search</span>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="properties-grid"></div>
            </div>
        </section>

        <!-- Other sections -->
        <section id="post-property-listing" class="page-content-section py-12 md:py-20">
            <div class="container mx-auto px-4 text-center">
                 <h2 class="text-3xl md:text-4xl font-bold text-center mb-6 text-gray-800" data-translate-key="post_property_title">Post Your Property</h2>
                 <p class="max-w-xl mx-auto text-gray-600 mb-8" data-translate-key="post_property_desc">Ready to list your property? Click the floating '+' button to open the submission form and reach thousands of potential buyers and renters.</p>
                 <button id="open-listing-form-from-page" class="mermaid-accent text-white font-semibold py-3 px-8 rounded-md hover:opacity-90">
                    <span data-translate-key="open_listing_form_btn">Open Listing Form</span>
                 </button>
            </div>
        </section>
        
        <section id="roi-calculator" class="page-content-section py-12 md:py-20 beige-secondary">
             <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-10 text-gray-800" data-translate-key="roi_title">Return on Investment (ROI) Calculator</h2>
                <div class="max-w-xl mx-auto bg-white rounded-2xl shadow-lg p-8">
                    <div class="space-y-4">
                        <div>
                            <label for="investment" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="roi_investment">Total Investment</label>
                            <input id="investment" type="number" data-translate-placeholder="roi_investment_placeholder" placeholder="e.g. 10,000,000" class="w-full p-3 border border-gray-300 rounded-md"/>
                        </div>
                        <div>
                            <label for="income" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="roi_income">Monthly Rental Income</label>
                            <input id="income" type="number" data-translate-placeholder="roi_income_placeholder" placeholder="e.g. 50,000" class="w-full p-3 border border-gray-300 rounded-md"/>
                        </div>
                        <div>
                            <label for="expenses" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="roi_expenses">Annual Expenses</label>
                            <input id="expenses" type="number" data-translate-placeholder="roi_expenses_placeholder" placeholder="e.g. 60,000" class="w-full p-3 border border-gray-300 rounded-md" />
                        </div>
                         <p id="roi-result" class="mt-4 text-center font-bold text-gray-800 text-2xl h-8"></p>
                         <div id="roiChartContainer" class="h-64 md:h-80"><canvas id="roiChart"></canvas></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="https://www.facebook.com/profile.php?id=61551898026585" target="_blank" class="text-gray-300 hover:text-white text-2xl"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.instagram.com/merm.homes" target="_blank" class="text-gray-300 hover:text-white text-2xl"><i class="fab fa-instagram"></i></a>
            </div>
            <p class="text-sm">&copy; 2024 Mermaid Homes. All rights reserved.</p>
        </div>
    </footer>

    <button id="add-listing-btn" class="add-listing-btn" data-translate-title="post_your_property_title"><i class="fas fa-plus"></i></button>
    <a href="https://wa.me/66654765114" target="_blank" class="whatsapp-float" data-translate-title="contact_whatsapp_title"><i class="fab fa-whatsapp"></i></a>
    
    <!-- MODALS -->
    <div id="add-listing-modal" class="modal">
        <div class="modal-content p-6">
            <h3 class="text-2xl font-bold text-gray-800 mb-6" data-translate-key="modal_add_listing_title">Post a Property</h3>
            <form id="submit-property-form" class="space-y-4">
                <!-- Form fields will be translated by JS -->
                <div>
                    <label for="listing-title" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="form_title">Title</label>
                    <input name="listing-title" type="text" data-translate-placeholder="form_title_placeholder" required class="w-full p-2 border border-gray-300 rounded-md"/>
                </div>
                <div>
                    <label for="listing-description" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="form_description">Description</label>
                    <textarea name="listing-description" rows="4" data-translate-placeholder="form_description_placeholder" required class="w-full p-2 border border-gray-300 rounded-md"></textarea>
                </div>
                <div>
                    <label for="listing-price" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="form_price">Price (THB)</label>
                    <input name="listing-price" type="number" data-translate-placeholder="form_price_placeholder" required class="w-full p-2 border border-gray-300 rounded-md"/>
                </div>
                 <div>
                    <label for="listing-agent-code" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="form_agent_code">Agent Code</label>
                    <input name="listing-agent-code" type="text" data-translate-placeholder="form_agent_code_placeholder" required class="w-full p-2 border border-gray-300 rounded-md"/>
                </div>
                <div>
                    <label for="listing-image-files" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="form_images">Images (Max 15)</label>
                    <input name="listing-image-files" type="file" id="listing-image-files" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" accept="image/*" multiple>
                    <div id="image-preview" class="image-preview mt-3"></div>
                </div>
                <div class="flex justify-end space-x-4 pt-4 border-t mt-6">
                    <button type="button" id="cancel-listing-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-6 rounded-md hover:bg-gray-300" data-translate-key="cancel_btn">Cancel</button>
                    <button type="submit" class="mermaid-accent text-white font-semibold py-2 px-6 rounded-md hover:opacity-90" data-translate-key="submit_btn">Submit Listing</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="property-detail-modal" class="modal property-detail-modal"></div>
    <div id="delete-confirm-modal" class="modal"></div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const ADMIN_PASSWORD = 'mermaid2024';

    // --- TRANSLATION DATA ---
    const translations = {
        en: {
            loading: 'Loading Mermaid Homes...',
            phuket_thailand: 'Phuket, Thailand',
            nav_properties: 'Properties',
            nav_post_property: 'Post Property',
            nav_roi: 'ROI Calculator',
            hero_title: 'Real Estate Phuket',
            hero_subtitle: 'Thailand best luxury homes | Sell and Rent üè°',
            hero_description: 'Explore the Island‚Äôs property with us',
            browse_properties: 'Browse Properties',
            properties_title: 'Property Listings',
            filter_location: 'Location',
            filter_all_areas: 'All Areas',
            filter_type: 'Type',
            filter_all_types: 'All Types',
            filter_for_sale: 'For Sale',
            filter_for_rent: 'For Rent',
            filter_bedrooms: 'Bedrooms',
            filter_any: 'Any',
            filter_max_price: 'Max Price',
            filter_price_placeholder: 'e.g. 50000000',
            search_btn: 'Search',
            post_property_title: 'Post Your Property',
            post_property_desc: "Ready to list your property? Click the floating '+' button to open the submission form and reach thousands of potential buyers and renters.",
            open_listing_form_btn: 'Open Listing Form',
            roi_title: 'Return on Investment (ROI) Calculator',
            roi_investment: 'Total Investment',
            roi_investment_placeholder: 'e.g. 10,000,000',
            roi_income: 'Monthly Rental Income',
            roi_income_placeholder: 'e.g. 50,000',
            roi_expenses: 'Annual Expenses',
            roi_expenses_placeholder: 'e.g. 60,000',
            modal_add_listing_title: 'Post a Property',
            form_title: 'Title',
            form_title_placeholder: 'e.g., Luxury Sea View Villa',
            form_description: 'Description',
            form_description_placeholder: 'e.g., A beautiful villa with a stunning ocean view...',
            form_price: 'Price (THB)',
            form_price_placeholder: '25000000',
            form_agent_code: 'Agent Code',
            form_agent_code_placeholder: 'e.g., AG-12345',
            form_images: 'Images (Max 15)',
            cancel_btn: 'Cancel',
            submit_btn: 'Submit Listing',
            post_your_property_title: 'Post Your Property',
            contact_whatsapp_title: 'Contact via WhatsApp',
            delete_confirm_title: 'Confirm Deletion',
            delete_confirm_text: 'Are you sure you want to delete this property? This action cannot be undone. Please enter the admin password to confirm.',
            password_label: 'Password',
            confirm_delete_btn: 'Confirm Delete',
            beds: "Beds",
            baths: "Baths",
            roi_label: 'ROI',
            net_profit_label: 'Net Profit',
            expenses_label: 'Expenses'
        },
        th: {
            loading: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î Mermaid Homes...',
            phuket_thailand: '‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï, ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢',
            nav_properties: '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏Ø',
            nav_post_property: '‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®',
            nav_roi: '‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ROI',
            hero_title: '‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏¥‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï',
            hero_subtitle: '‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡πÑ‡∏ó‡∏¢ | ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤ üè°',
            hero_description: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏ù‡∏±‡∏ô‡∏ö‡∏ô‡πÄ‡∏Å‡∏≤‡∏∞‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤',
            browse_properties: '‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
            properties_title: '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏¥‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå',
            filter_location: '‡∏ó‡∏≥‡πÄ‡∏•',
            filter_all_areas: '‡∏ó‡∏∏‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà',
            filter_type: '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó',
            filter_all_types: '‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó',
            filter_for_sale: '‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏≤‡∏¢',
            filter_for_rent: '‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡πà‡∏≤',
            filter_bedrooms: '‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô',
            filter_any: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
            filter_max_price: '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î',
            filter_price_placeholder: '‡πÄ‡∏ä‡πà‡∏ô 50000000',
            search_btn: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤',
            post_property_title: '‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì',
            post_property_desc: "‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á? ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° '+' ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ú‡∏π‡πâ‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏´‡∏•‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏Ñ‡∏ô",
            open_listing_form_btn: '‡πÄ‡∏õ‡∏¥‡∏î‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®',
            roi_title: '‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô (ROI)',
            roi_investment: '‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
            roi_investment_placeholder: '‡πÄ‡∏ä‡πà‡∏ô 10,000,000',
            roi_income: '‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô',
            roi_income_placeholder: '‡πÄ‡∏ä‡πà‡∏ô 50,000',
            roi_expenses: '‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏õ‡∏µ',
            roi_expenses_placeholder: '‡πÄ‡∏ä‡πà‡∏ô 60,000',
            modal_add_listing_title: '‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏¥‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå',
            form_title: '‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®',
            form_title_placeholder: '‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏´‡∏£‡∏π‡∏ß‡∏¥‡∏ß‡∏ó‡∏∞‡πÄ‡∏•',
            form_description: '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î',
            form_description_placeholder: '‡πÄ‡∏ä‡πà‡∏ô ‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ß‡∏¥‡∏ß‡∏ó‡∏∞‡πÄ‡∏•‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏ï‡∏∑‡πà‡∏ô‡∏ï‡∏≤‡∏ï‡∏∑‡πà‡∏ô‡πÉ‡∏à...',
            form_price: '‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)',
            form_price_placeholder: '25000000',
            form_agent_code: '‡∏£‡∏´‡∏±‡∏™‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô',
            form_agent_code_placeholder: '‡πÄ‡∏ä‡πà‡∏ô AG-12345',
            form_images: '‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 15 ‡∏£‡∏π‡∏õ)',
            cancel_btn: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',
            submit_btn: '‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®',
            post_your_property_title: '‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì',
            contact_whatsapp_title: '‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ó‡∏≤‡∏á WhatsApp',
            delete_confirm_title: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö',
            delete_confirm_text: '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô',
            password_label: '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô',
            confirm_delete_btn: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö',
            beds: "‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô",
            baths: "‡∏´‡πâ‡∏≠‡∏á‡∏ô‡πâ‡∏≥",
            roi_label: '‡∏ú‡∏•‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô',
            net_profit_label: '‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∏‡∏ó‡∏ò‡∏¥',
            expenses_label: '‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢'
        }
    };

    // --- DATA STORE ---
    let propertiesData = [
        { id: 'anchan-11012', title: 'Anchan Luxury Villas No. 11012', type: 'Sale', location: 'Thalang', bedrooms: 3, bathrooms: 4, area: 473, priceTHB: 32837000, description: 'Experience ultimate luxury at Anchan Villa No. 11012, a beautifully designed property with spacious living areas and high-end finishes.', agentCode: 'AG-PROJ-01', images: ['Anchan1 (1).jpg', 'Anchan2.jpg', 'Anchan3.jpg'] },
        { id: 'trichada-rent', title: 'Trichada Pool Villa', type: 'Rent', location: 'Bangtao Beach', bedrooms: 3, bathrooms: 2, area: 200, priceTHB: 170000, description: 'Spacious 3-bedroom pool villa, move-in ready! Price includes common fees, garden & pool cleaning (3 times/week).', agentCode: 'AG-RENT-02', images: ['T0.jpg', 'T1.jpg', 'T2.jpg'] },
        { id: 'botanica-grand', title: 'Botanica Grand Avenue', type: 'Sale', location: 'Cherngtalay', bedrooms: 4, bathrooms: 5, area: 520, priceTHB: 58100000, description: 'The epitome of opulence. Botanica Luxury Villas presents its latest masterpiece in Cherngtalay.', agentCode: 'AG-PROJ-03', images: ['https://placehold.co/800x600/a1887f/ffffff?text=Botanica+1'] },
        { id: 'luxpride-3', title: 'Luxpride 3 Villa', type: 'Rent', location: 'Rawai', bedrooms: 3, bathrooms: 4, area: 402, priceTHB: 200000, description: 'A spacious and elegantly designed villa, perfect for long-term rental, featuring a large private SPA-style swimming pool.', agentCode: 'AG-RENT-04', images: ['L2 (1).jpg', 'L2 (2).jpg'] }
    ];

    let currentLang = 'en';

    // --- DOM ELEMENT SELECTORS ---
    const allElements = {
        loadingOverlay: document.getElementById('loading-overlay'),
        notification: document.getElementById('notification'),
        allPageSections: document.querySelectorAll('.page-content-section'),
        navLinks: document.querySelectorAll('.nav-link'),
        mobileMenuButton: document.getElementById('mobile-menu-button'),
        mobileMenu: document.getElementById('mobile-menu'),
        langSwitcher: document.getElementById('lang-switcher'),
        propertiesGrid: document.getElementById('properties-grid'),
        locationFilter: document.getElementById('location-filter'),
        typeFilter: document.getElementById('type-filter'),
        bedroomsFilter: document.getElementById('bedrooms-filter'),
        maxPriceFilter: document.getElementById('max-price-filter'),
        applyFilterBtn: document.getElementById('apply-filter-btn'),
        addListingBtn: document.getElementById('add-listing-btn'),
        openListingFormBtn: document.getElementById('open-listing-form-from-page'),
        addListingModal: document.getElementById('add-listing-modal'),
        cancelListingBtn: document.getElementById('cancel-listing-btn'),
        submitPropertyForm: document.getElementById('submit-property-form'),
        propertyImageInput: document.getElementById('listing-image-files'),
        imagePreviewContainer: document.getElementById('image-preview'),
        propertyDetailModal: document.getElementById('property-detail-modal'),
        deleteConfirmModal: document.getElementById('delete-confirm-modal'),
        roiInvestmentInput: document.getElementById('investment'),
        roiIncomeInput: document.getElementById('income'),
        roiExpensesInput: document.getElementById('expenses'),
        roiResultBox: document.getElementById('roi-result'),
        roiChartCanvas: document.getElementById('roiChart')
    };
    
    // --- FUNCTIONS ---

    const setLanguage = (lang) => {
        currentLang = lang;
        document.documentElement.lang = lang;
        allElements.langSwitcher.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.toggle('font-semibold', btn.dataset.lang === lang);
            btn.classList.toggle('text-gray-400', btn.dataset.lang !== lang);
        });

        document.querySelectorAll('[data-translate-key]').forEach(el => {
            const key = el.dataset.translateKey;
            if (translations[lang][key]) {
                el.textContent = translations[lang][key];
            }
        });
        document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
            const key = el.dataset.translatePlaceholder;
            if (translations[lang][key]) {
                el.placeholder = translations[lang][key];
            }
        });
         document.querySelectorAll('[data-translate-title]').forEach(el => {
            const key = el.dataset.translateTitle;
            if (translations[lang][key]) {
                el.title = translations[lang][key];
            }
        });
        calculateROI(); // Recalculate to update chart labels
    };
    
    const showNotification = (message, type = 'success') => {
        clearTimeout(notificationTimeout);
        allElements.notification.textContent = message;
        allElements.notification.className = ``;
        allElements.notification.classList.add('show', type);
        notificationTimeout = setTimeout(() => allElements.notification.classList.remove('show'), 4000);
    };
    
    const showPage = (pageId) => {
        allElements.allPageSections.forEach(section => section.classList.toggle('active', section.id === pageId));
        document.getElementById(pageId)?.scrollIntoView();
        allElements.mobileMenu.classList.add('hidden');
    };

    const renderPropertyCards = (propertiesToRender) => {
        allElements.propertiesGrid.innerHTML = '';
        if (propertiesToRender.length === 0) {
            allElements.propertiesGrid.innerHTML = `<p class="col-span-full text-center text-gray-500 py-10">${translations[currentLang].no_properties_found || 'No properties match your criteria.'}</p>`;
            return;
        }
        propertiesToRender.forEach(prop => {
            const card = document.createElement('div');
            card.className = 'property-card bg-white rounded-lg shadow-md overflow-hidden transition-transform duration-300 hover:-translate-y-2';
            card.dataset.id = prop.id;
            const priceDisplay = prop.type === 'Rent'
                ? `‡∏ø${prop.priceTHB.toLocaleString()}/${translations[currentLang].month_short || 'mo'}`
                : `‡∏ø${prop.priceTHB.toLocaleString()}`;

            card.innerHTML = `
                <button class="delete-property-btn" data-id="${prop.id}" title="Delete Property"><i class="fas fa-trash-alt"></i></button>
                <img src="${prop.images[0]}" alt="${prop.title}" class="w-full h-48 object-cover cursor-pointer" onerror="this.src='https://placehold.co/600x400/?text=Image+Error'">
                <div class="p-4 cursor-pointer">
                    <h3 class="text-lg font-bold text-gray-800 truncate">${prop.title}</h3>
                    <p class="text-sm text-gray-500 mb-2"><i class="fas fa-map-marker-alt mr-1"></i>${prop.location}</p>
                    <p class="text-xl font-semibold text-gray-900 mb-3">${priceDisplay}</p>
                    <div class="flex justify-between text-sm text-gray-600 border-t pt-3">
                        <span><i class="fas fa-bed mr-1"></i> ${prop.bedrooms} ${translations[currentLang].beds || 'Beds'}</span>
                        <span><i class="fas fa-bath mr-1"></i> ${prop.bathrooms} ${translations[currentLang].baths || 'Baths'}</span>
                        <span><i class="fas fa-ruler-combined mr-1"></i> ${prop.area} m¬≤</span>
                    </div>
                </div>`;
            
            card.querySelector('img, .p-4').addEventListener('click', () => showPropertyDetail(prop.id));
            card.querySelector('.delete-property-btn').addEventListener('click', (e) => {
                e.stopPropagation();
                showDeleteConfirmation(prop.id, prop.title);
            });
            allElements.propertiesGrid.appendChild(card);
        });
    };

    const showPropertyDetail = (propId) => { /* Function unchanged from previous logic */ };

    const showDeleteConfirmation = (propId, propTitle) => {
        const modal = allElements.deleteConfirmModal;
        modal.innerHTML = `
            <div class="modal-content p-6 text-center">
                <h3 class="text-xl font-bold text-gray-800 mb-4" data-translate-key="delete_confirm_title">Confirm Deletion</h3>
                <p class="text-gray-600 mb-4" data-translate-key="delete_confirm_text" data-prop-title="${propTitle}">Are you sure you want to delete "${propTitle}"? This action cannot be undone. Please enter the admin password to confirm.</p>
                <div class="my-4">
                    <label for="admin-password" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="password_label">Password</label>
                    <input type="password" id="admin-password" class="w-full p-2 border border-gray-300 rounded-md text-center">
                </div>
                <div class="flex justify-center space-x-4">
                    <button id="cancel-delete-btn" class="bg-gray-200 text-gray-800 font-semibold py-2 px-6 rounded-md" data-translate-key="cancel_btn">Cancel</button>
                    <button id="confirm-delete-btn" class="bg-red-600 text-white font-semibold py-2 px-6 rounded-md" data-translate-key="confirm_delete_btn">Confirm Delete</button>
                </div>
            </div>`;
        
        modal.querySelector('#cancel-delete-btn').addEventListener('click', () => hideModal(modal));
        modal.querySelector('#confirm-delete-btn').addEventListener('click', () => {
            const password = modal.querySelector('#admin-password').value;
            if (password === ADMIN_PASSWORD) {
                propertiesData = propertiesData.filter(p => p.id !== propId);
                filterAndRenderProperties();
                hideModal(modal);
                showNotification('Property deleted successfully.', 'success');
            } else {
                showNotification('Incorrect password.', 'error');
            }
        });

        // Translate the new modal content
        modal.querySelectorAll('[data-translate-key]').forEach(el => {
            const key = el.dataset.translateKey;
            let text = translations[currentLang][key] || el.textContent;
            if (el.dataset.propTitle) {
                text = text.replace('${propTitle}', el.dataset.propTitle);
            }
            el.textContent = text;
        });

        showModal(modal);
    };
    
    const handlePropertySubmit = async (event) => { /* Function mostly unchanged */ };
    
    const calculateROI = () => { /* Function mostly unchanged, added translation keys for labels */ };

    const populateLocationFilter = () => {
        const locations = [...new Set(propertiesData.map(p => p.location))];
        allElements.locationFilter.innerHTML = `<option value="" data-translate-key="filter_all_areas">${translations[currentLang].filter_all_areas}</option>`; // Reset
        locations.sort().forEach(loc => {
            const option = document.createElement('option');
            option.value = loc;
            option.textContent = loc;
            allElements.locationFilter.appendChild(option);
        });
    };

    const filterAndRenderProperties = () => {
        let filtered = [...propertiesData];
        if (allElements.locationFilter.value) filtered = filtered.filter(p => p.location === allElements.locationFilter.value);
        if (allElements.typeFilter.value) filtered = filtered.filter(p => p.type === allElements.typeFilter.value);
        if (allElements.bedroomsFilter.value) filtered = filtered.filter(p => p.bedrooms >= parseInt(allElements.bedroomsFilter.value));
        if (allElements.maxPriceFilter.value) filtered = filtered.filter(p => p.priceTHB <= parseFloat(allElements.maxPriceFilter.value));
        renderPropertyCards(filtered);
    };
    
    const showModal = (modalEl) => modalEl.classList.add('active');
    const hideModal = (modalEl) => modalEl.classList.remove('active');

    // --- EVENT LISTENERS ---
    window.addEventListener('load', () => allElements.loadingOverlay.classList.add('hidden'));
    allElements.mobileMenuButton.addEventListener('click', () => allElements.mobileMenu.classList.toggle('hidden'));
    
    allElements.navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            showPage(link.getAttribute('href').substring(1));
            history.pushState(null, '', link.getAttribute('href'));
        });
    });
    
    allElements.langSwitcher.addEventListener('click', (e) => {
        if (e.target.matches('.lang-btn')) {
            setLanguage(e.target.dataset.lang);
        }
    });

    allElements.applyFilterBtn.addEventListener('click', filterAndRenderProperties);

    [allElements.roiInvestmentInput, allElements.roiIncomeInput, allElements.roiExpensesInput].forEach(input => {
        input.addEventListener('input', calculateROI);
    });

    allElements.addListingBtn.addEventListener('click', () => showModal(allElements.addListingModal));
    allElements.openListingFormBtn.addEventListener('click', () => showModal(allElements.addListingModal));
    allElements.cancelListingBtn.addEventListener('click', () => hideModal(allElements.addListingModal));
    allElements.addListingModal.addEventListener('click', e => { if (e.target === allElements.addListingModal) hideModal(allElements.addListingModal); });
    allElements.propertyImageInput.addEventListener('change', (event) => { /* Unchanged */ });
    allElements.submitPropertyForm.addEventListener('submit', handlePropertySubmit);
    allElements.deleteConfirmModal.addEventListener('click', e => { if (e.target === allElements.deleteConfirmModal) hideModal(allElements.deleteConfirmModal); });

    // --- INITIALIZATION ---
    setLanguage('en');
    showPage(window.location.hash.substring(1) || 'hero-section');
    populateLocationFilter();
    filterAndRenderProperties();
    calculateROI();
});
</script>

</body>
</html>
