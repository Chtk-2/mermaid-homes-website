<index.html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Homes - Real Estate Phuket</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Forum&family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Forum', 'Sarabun', sans-serif; color: #374151; }
        .container { max-width: 1280px; }

        #loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #fff; display: flex;
            flex-direction: column; align-items: center; justify-content: center;
            z-index: 9999; opacity: 1; visibility: visible;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        #loading-overlay.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        #loading-overlay img { max-width: 200px; }

        .page-content-section {
            display: none;
            animation: fadeIn 0.6s ease-in-out;
        }
        .page-content-section.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hero-background {
            position: relative; height: 85vh; min-height: 600px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            text-align: center; color: white; overflow: hidden;
        }
        #hero-video {
            position: absolute; top: 50%; left: 50%;
            width: 100%; height: 100%; object-fit: cover;
            transform: translate(-50%, -50%); z-index: 1;
        }
        .hero-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 2; }
        
        #hero-search-form-container {
            position: relative; z-index: 3;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 2rem;
            width: 90%;
            max-width: 800px;
        }
        .hero-search-tabs button {
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.7);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        .hero-search-tabs button.active { color: white; border-bottom-color: white; }

        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 2000; backdrop-filter: blur(5px);
            align-items: center; justify-content: center;
        }
        .modal.active { display: flex; }
        .modal-content {
            background: white; border-radius: 16px; max-width: 600px;
            width: 90%; max-height: 90vh; overflow-y: auto; position: relative;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            animation: modal-enter 0.3s forwards ease-out;
        }
        @keyframes modal-enter { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        
        .whatsapp-float {
            position: fixed; bottom: 30px; width: 60px; height: 60px;
            border-radius: 50%; color: white; font-size: 24px;
            display: flex; align-items: center; justify-content: center;
            z-index: 1000; transition: all 0.3s ease; box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            left: 30px; background: #25D366; 
        }
        .add-listing-btn {
            position: fixed; bottom: 30px; width: 60px; height: 60px;
            border-radius: 50%; color: white; font-size: 24px;
            display: flex; align-items: center; justify-content: center;
            z-index: 1000; transition: all 0.3s ease; box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            right: 30px; background: linear-gradient(135deg, #4db6ac, #26a69a); 
        }
        .add-listing-btn:hover, .whatsapp-float:hover { transform: scale(1.1); }
        
        .property-card { 
            position: relative; 
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            background: #fff;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .property-card:hover {
             transform: translateY(-5px);
             box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .delete-property-btn {
            position: absolute; top: 10px; right: 10px;
            background-color: rgba(220, 53, 69, 0.8); color: white;
            border-radius: 50%; width: 30px; height: 30px;
            display: flex; align-items: center; justify-content: center;
            border: none; cursor: pointer; transition: all 0.2s;
            opacity: 0; z-index: 5;
        }
        .property-card:hover .delete-property-btn { opacity: 1; }
        
        #notification {
            position: fixed; top: 20px; left: 50%;
            padding: 1rem 2rem; border-radius: 8px; color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 9999;
            opacity: 0; visibility: hidden; transition: all 0.3s ease; transform: translate(-50%, -20px);
        }
        #notification.show { opacity: 1; visibility: visible; transform: translate(-50%, 0); }
        #notification.success { background-color: #28a745; }
        #notification.error { background-color: #dc3545; }

        .reveal-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .reveal-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="loading-overlay">
        <img src="Textt1.png" alt="Mermaid Homes Logo" onerror="this.onerror=null;this.src='https://placehold.co/200x60?text=Mermaid+Homes';">
    </div>
    <div id="notification"></div>

    <header class="bg-white shadow-sm py-2 sticky top-0 z-50">
       <div class="container mx-auto px-4 flex justify-between items-center">
            <a href="#hero-section" class="flex items-center space-x-3 nav-link">
                <img src="Textt1.png" alt="Mermaid Homes Logo" class="h-16 w-auto" onerror="this.onerror=null;this.src='https://placehold.co/150x40?text=Mermaid+Homes';">
            </a>
            <nav class="hidden md:flex items-center space-x-8 text-lg">
                <a href="#properties" class="nav-link text-gray-600 hover:text-gray-900" data-translate-key="nav_properties">Properties</a>
                <a href="#roi-calculator" class="nav-link text-gray-600 hover:text-gray-900" data-translate-key="nav_roi">ROI Calculator</a>
                <a href="#contact" class="nav-link text-gray-600 hover:text-gray-900" data-translate-key="nav_contact">Contact</a>
                <a href="#post-property-listing" class="nav-link text-gray-600 hover:text-teal-600" data-translate-key="nav_post_property">Post Property</a>
            </nav>
            <div class="flex items-center">
                <div id="lang-switcher" class="mr-4">
                    <button data-lang="en" class="lang-btn font-semibold p-1">EN</button>
                    <span class="text-gray-300">|</span>
                    <button data-lang="th" class="lang-btn text-gray-400 p-1">TH</button>
                </div>
                <button id="mobile-menu-button" class="md:hidden text-gray-600">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t">
             <a href="#properties" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_properties">Properties</a>
             <a href="#roi-calculator" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_roi">ROI Calculator</a>
             <a href="#contact" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_contact">Contact</a>
             <a href="#post-property-listing" class="nav-link block text-center py-3 text-gray-700 hover:bg-gray-100" data-translate-key="nav_post_property">Post Property</a>
        </div>
    </header>

    <main id="main-content">
        <section id="hero-section" class="page-content-section hero-background">
             <div class="hero-overlay"></div>
             <video autoplay loop muted playsinline id="hero-video" poster="https://placehold.co/1920x1080/?text=Loading+Video...">
                 <source src="Video opening.mp4" type="video/mp4">
             </video>
             <div id="hero-search-form-container">
                 <div class="hero-search-tabs flex justify-center mb-4">
                     <button id="hero-search-buy-btn" class="active" data-translate-key="filter_for_sale">For Sale</button>
                     <button id="hero-search-rent-btn" data-translate-key="filter_for_rent">For Rent</button>
                 </div>
                 <form id="hero-search-form" class="flex flex-col md:flex-row gap-2">
                     <input type="text" id="hero-search-input" class="flex-grow p-4 rounded-lg text-gray-800 text-lg" data-translate-placeholder="hero_search_placeholder" placeholder="Enter area, building, or community">
                     <button type="submit" class="p-4 bg-stone-700 text-white font-bold rounded-lg flex items-center justify-center hover:bg-stone-800 transition-colors">
                         <i class="fas fa-search mr-2"></i>
                         <span data-translate-key="search_btn">Search</span>
                     </button>
                 </form>
             </div>
        </section>
        
        <section id="properties" class="page-content-section py-12 md:py-20 bg-gray-50">
             <div class="container mx-auto px-4">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-10 text-gray-800 reveal-on-scroll" data-translate-key="properties_title">Property Listings</h2>
                <div class="bg-white p-6 rounded-xl shadow-md mb-12 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 items-end reveal-on-scroll">
                    <div>
                        <label for="location-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_location">Location</label>
                        <select id="location-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm"></select>
                    </div>
                    <div>
                        <label for="category-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_category">Category</label>
                        <select id="category-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm"></select>
                    </div>
                     <div>
                        <label for="type-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_type">Type</label>
                        <select id="type-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm"></select>
                    </div>
                    <div>
                        <label for="bedrooms-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_bedrooms">Bedrooms</label>
                        <select id="bedrooms-filter" class="w-full p-2 border border-gray-300 rounded-md shadow-sm"></select>
                    </div>
                    <div>
                        <label for="max-price-filter" class="block text-sm font-medium text-gray-700 mb-1" data-translate-key="filter_max_price">Max Price</label>
                        <input type="number" id="max-price-filter" data-translate-placeholder="filter_price_placeholder" class="w-full p-2 border border-gray-300 rounded-md">
                    </div>
                    <button id="apply-filter-btn" class="w-full bg-stone-700 text-white font-bold py-2 px-4 rounded-md hover:bg-stone-800 transition-colors">
                        <i class="fas fa-search mr-2"></i><span data-translate-key="search_btn">Search</span>
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="properties-grid"></div>
            </div>
        </section>

        <section id="post-property-listing" class="page-content-section py-12 md:py-20 bg-gray-50">
             <div class="container mx-auto px-4 text-center">
                 <h2 class="text-4xl md:text-5xl font-bold text-center mb-6 text-gray-800 reveal-on-scroll" data-translate-key="post_property_title">Post Your Property</h2>
                 <p class="max-w-xl mx-auto text-gray-600 mb-8 reveal-on-scroll" data-translate-key="post_property_desc">Ready to list your property? Click the floating '+' button to open the submission form and reach thousands of potential buyers and renters.</p>
                 <button id="open-listing-form-from-page" class="bg-teal-600 text-white font-semibold py-3 px-8 rounded-md hover:bg-teal-700 transition-colors reveal-on-scroll">
                    <span data-translate-key="open_listing_form_btn">Open Listing Form</span>
                 </button>
            </div>
        </section>
        
        <section id="roi-calculator" class="page-content-section py-12 md:py-20 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-10 text-gray-800 reveal-on-scroll" data-translate-key="roi_title">Return on Investment (ROI) Calculator</h2>
                <div class="max-w-xl mx-auto bg-white rounded-2xl shadow-lg p-8 reveal-on-scroll">
                    <div class="space-y-4">
                        <div>
                            <label for="investment" class="block text-lg font-medium text-gray-700 mb-1" data-translate-key="roi_investment">Total Investment</label>
                            <input id="investment" type="number" data-translate-placeholder="roi_investment_placeholder" class="w-full p-3 border border-gray-300 rounded-md text-lg"/>
                        </div>
                        <div>
                            <label for="income" class="block text-lg font-medium text-gray-700 mb-1" data-translate-key="roi_income">Monthly Rental Income</label>
                            <input id="income" type="number" data-translate-placeholder="roi_income_placeholder" class="w-full p-3 border border-gray-300 rounded-md text-lg"/>
                        </div>
                        <div>
                            <label for="expenses" class="block text-lg font-medium text-gray-700 mb-1" data-translate-key="roi_expenses">Annual Expenses</label>
                            <input id="expenses" type="number" data-translate-placeholder="roi_expenses_placeholder" class="w-full p-3 border border-gray-300 rounded-md text-lg" />
                        </div>
                         <p id="roi-result" class="mt-4 text-center font-bold text-gray-800 text-3xl h-10"></p>
                         <div id="roiChartContainer" class="h-64 md:h-80"><canvas id="roiChart"></canvas></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="page-content-section py-12 md:py-20 bg-gray-50">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-4 text-gray-800 reveal-on-scroll" data-translate-key="contact_title">Get In Touch</h2>
                <p class="text-center text-gray-500 mb-12 max-w-2xl mx-auto reveal-on-scroll" data-translate-key="contact_subtitle">We are here to help you. Contact us via phone, email, or our social media channels.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <a href="tel:+66654765114" class="bg-white p-8 rounded-lg shadow-sm text-center transition-transform hover:-translate-y-2 reveal-on-scroll">
                        <div class="text-5xl text-teal-500 mb-4"><i class="fas fa-phone-alt"></i></div>
                        <h3 class="text-2xl font-semibold text-gray-800" data-translate-key="contact_phone">Phone</h3>
                        <p class="text-gray-500 mt-2 text-lg">+66 65 476 5114</p>
                    </a>
                    <a href="https://wa.me/66654765114" target="_blank" class="bg-white p-8 rounded-lg shadow-sm text-center transition-transform hover:-translate-y-2 reveal-on-scroll">
                        <div class="text-5xl text-green-500 mb-4"><i class="fab fa-whatsapp"></i></div>
                        <h3 class="text-2xl font-semibold text-gray-800" data-translate-key="contact_whatsapp">WhatsApp</h3>
                        <p class="text-gray-500 mt-2 text-lg" data-translate-key="contact_whatsapp_text">Chat with us</p>
                    </a>
                    <a href="mailto:contact@mermaidhomes.com" class="bg-white p-8 rounded-lg shadow-sm text-center transition-transform hover:-translate-y-2 reveal-on-scroll">
                        <div class="text-5xl text-blue-500 mb-4"><i class="fas fa-envelope"></i></div>
                        <h3 class="text-2xl font-semibold text-gray-800" data-translate-key="contact_email">Email</h3>
                        <p class="text-gray-500 mt-2 text-lg">contact@mermaidhomes.com</p>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4 text-center">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="https://www.facebook.com/profile.php?id=61551898026585" target="_blank" class="text-gray-300 hover:text-white text-2xl"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.instagram.com/merm.homes" target="_blank" class="text-gray-300 hover:text-white text-2xl"><i class="fab fa-instagram"></i></a>
            </div>
            <p class="text-sm">&copy; 2024 Mermaid Homes. All rights reserved.</p>
        </div>
    </footer>

    <button id="add-listing-btn" class="add-listing-btn" data-translate-title="post_your_property_title"><i class="fas fa-plus"></i></button>
    <a href="https://wa.me/66654765114" target="_blank" class="whatsapp-float" data-translate-title="contact_whatsapp_title"><i class="fab fa-whatsapp"></i></a>
    
    <div id="add-listing-modal" class="modal">
        <div class="modal-content p-6">
            <h3 class="text-2xl font-bold text-gray-800 mb-6" data-translate-key="modal_add_listing_title">Post a Property</h3>
            <form id="submit-property-form" class="space-y-4">
            </form>
        </div>
    </div>
    <div id="property-detail-modal" class="modal property-detail-modal"></div>
    <div id="delete-confirm-modal" class="modal"></div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const App = {
            ADMIN_PASSWORD: 'mermaid2024',
            elements: {},
            currentLang: 'en',
            roiChartInstance: null,
            notificationTimeout: null,
            propertiesData: [
                { id: 'anchan-11012', title: 'Anchan Luxury Villas', type: 'Sale', category: 'Villa', location: 'Thalang', bedrooms: 3, bathrooms: 4, area: 473, priceTHB: 32837000, description: 'Experience ultimate luxury...', agentCode: 'AG-PROJ-01', images: ['https://raw.githubusercontent.com/wix-media/wix-media-entries/main/wix-media-entries/Anchan1%20(1).jpg'] },
                { id: 'trichada-rent', title: 'Trichada Pool Villa', type: 'Rent', category: 'Villa', location: 'Bangtao Beach', bedrooms: 3, bathrooms: 2, area: 200, priceTHB: 170000, description: 'Spacious 3-bedroom pool villa...', agentCode: 'AG-RENT-02', images: ['https://raw.githubusercontent.com/wix-media/wix-media-entries/main/wix-media-entries/T0.jpg'] },
                { id: 'botanica-grand', title: 'Botanica Grand Avenue', type: 'Sale', category: 'Villa', location: 'Cherngtalay', bedrooms: 4, bathrooms: 5, area: 520, priceTHB: 58100000, description: 'The epitome of opulence...', agentCode: 'AG-PROJ-03', images: ['https://placehold.co/800x600/a1887f/ffffff?text=Botanica+1'] },
                { id: 'the-base-height', title: 'The Base Height Condo', type: 'Sale', category: 'Condo', location: 'Phuket Town', bedrooms: 1, bathrooms: 1, area: 34, priceTHB: 2500000, description: 'Modern condo in the heart of Phuket Town.', agentCode: 'AG-SALE-05', images: ['https://placehold.co/800x600/455a64/ffffff?text=Condo+1'] },
                { id: 'luxe-villa-cherngtalay', title: 'The Luxe Villa', type: 'Sale', category: 'Villa', location: 'Cherngtalay', bedrooms: 5, bathrooms: 6, area: 500, priceTHB: 50000000, description: 'An exquisite villa offering unparalleled luxury...', agentCode: 'AG-LUXE-06', images: ['https://placehold.co/800x600/5d4037/ffffff?text=Luxe+Villa'] }
            ],
            translations: {
                en: { nav_contact: 'Contact', contact_title: 'Get In Touch', contact_subtitle: 'We are here to help you. Contact us via phone, email, or our social media channels.', contact_phone: 'Phone', contact_whatsapp: 'WhatsApp', contact_whatsapp_text: 'Chat with us', contact_email: 'Email', loading: 'Loading...', nav_properties: 'Properties', nav_roi: 'ROI Calculator', nav_post_property: 'Post Property', hero_search_placeholder: 'Enter area, building, or community', search_btn: 'Search', properties_title: 'Property Listings', filter_location: 'Location', filter_all_areas: 'All Areas', filter_category: 'Category', filter_all_categories: 'All Categories', filter_type: 'Type', filter_all_types: 'All Types', filter_for_sale: 'For Sale', filter_for_rent: 'For Rent', filter_bedrooms: 'Bedrooms', filter_any: 'Any', filter_max_price: 'Max Price', post_property_title: 'Post Your Property', post_property_desc: "Ready to list your property? Click the floating '+' button...", open_listing_form_btn: 'Open Listing Form', roi_title: 'ROI Calculator', roi_investment: 'Total Investment', roi_investment_placeholder: 'e.g. 10,000,000', roi_income: 'Monthly Rental Income', roi_income_placeholder: 'e.g. 50,000', roi_expenses: 'Annual Expenses', roi_expenses_placeholder: 'e.g. 60,000', modal_add_listing_title: 'Post a Property', form_title: 'Title', form_title_placeholder: 'e.g., Luxury Sea View Villa', form_description: 'Description', form_description_placeholder: 'e.g., A beautiful villa with a stunning ocean view...', form_price: 'Price (THB)', form_price_placeholder: '25000000', form_agent_code: 'Agent Code', form_agent_code_placeholder: 'e.g., AG-12345', form_images: 'Images (Max 15)', cancel_btn: 'Cancel', submit_btn: 'Submit Listing', delete_confirm_title: 'Confirm Deletion', delete_confirm_text: 'Are you sure you want to delete this property? Enter password to confirm.', password_label: 'Password', confirm_delete_btn: 'Confirm Delete', beds: "Beds", baths: "Baths", roi_label: 'ROI', net_profit_label: 'Net Profit', expenses_label: 'Expenses', no_properties_found: 'No properties match your criteria.', month_short: 'mo' },
                th: { nav_contact: 'ติดต่อเรา', contact_title: 'ติดต่อเรา', contact_subtitle: 'เราพร้อมที่จะช่วยเหลือคุณ ติดต่อเราผ่านทางโทรศัพท์ อีเมล หรือช่องทางโซเชียลมีเดียของเรา', contact_phone: 'โทรศัพท์', contact_whatsapp: 'WhatsApp', contact_whatsapp_text: 'แชทกับเรา', contact_email: 'อีเมล', loading: 'กำลังโหลด...', nav_properties: 'รายการอสังหาฯ', nav_roi: 'คำนวณ ROI', nav_post_property: 'ลงประกาศ', hero_search_placeholder: 'ค้นหาจากพื้นที่...', search_btn: 'ค้นหา', properties_title: 'รายการอสังหาริมทรัพย์', filter_location: 'ทำเล', filter_all_areas: 'ทุกพื้นที่', filter_category: 'หมวดหมู่', filter_all_categories: 'ทุกหมวดหมู่', filter_type: 'ประเภท', filter_all_types: 'ทุกประเภท', filter_for_sale: 'สำหรับขาย', filter_for_rent: 'สำหรับเช่า', filter_bedrooms: 'ห้องนอน', filter_any: 'ทั้งหมด', filter_max_price: 'ราคาสูงสุด', post_property_title: 'ลงประกาศของคุณ', post_property_desc: "พร้อมลงประกาศทรัพย์สินของคุณ? คลิกปุ่ม '+' เพื่อเปิดฟอร์ม", open_listing_form_btn: 'เปิดฟอร์มลงประกาศ', roi_title: 'คำนวณผลตอบแทน (ROI)', roi_investment: 'เงินลงทุนทั้งหมด', roi_investment_placeholder: 'เช่น 10,000,000', roi_income: 'รายได้ค่าเช่าต่อเดือน', roi_income_placeholder: 'เช่น 50,000', roi_expenses: 'ค่าใช้จ่ายต่อปี', roi_expenses_placeholder: 'เช่น 60,000', modal_add_listing_title: 'ลงประกาศอสังหาริมทรัพย์', form_title: 'ชื่อประกาศ', form_title_placeholder: 'เช่น วิลล่าสุดหรูวิวทะเล', form_description: 'รายละเอียด', form_description_placeholder: 'เช่น วิลล่าที่สวยงามพร้อมวิวทะเล...', form_price: 'ราคา (บาท)', form_price_placeholder: '25000000', form_agent_code: 'รหัสตัวแทน', form_agent_code_placeholder: 'เช่น AG-12345', form_images: 'รูปภาพ (สูงสุด 15 รูป)', cancel_btn: 'ยกเลิก', submit_btn: 'ลงประกาศ', delete_confirm_title: 'ยืนยันการลบ', delete_confirm_text: 'คุณแน่ใจหรือไม่ว่าต้องการลบรายการนี้? กรุณาใส่รหัสผ่านเพื่อยืนยัน', password_label: 'รหัสผ่าน', confirm_delete_btn: 'ยืนยันการลบ', beds: "ห้องนอน", baths: "ห้องน้ำ", roi_label: 'ผลตอบแทน', net_profit_label: 'กำไรสุทธิ', expenses_label: 'ค่าใช้จ่าย', no_properties_found: 'ไม่พบรายการที่ตรงกับเงื่อนไข', month_short: 'ด' }
            },

            init() {
                this.cacheDOMElements();
                this.bindEvents();
                this.setLanguage('en');
                this.showPage(window.location.hash.substring(1) || 'hero-section');
                this.populateFilters();
                this.filterAndRenderProperties();
                this.calculateROI();
                this.initScrollAnimations();
            },

            cacheDOMElements() {
                const ids = ['loading-overlay', 'notification', 'mobile-menu-button', 'mobile-menu', 'lang-switcher', 'properties-grid', 'location-filter', 'category-filter', 'type-filter', 'bedrooms-filter', 'max-price-filter', 'apply-filter-btn', 'hero-search-form', 'hero-search-input', 'hero-search-buy-btn', 'hero-search-rent-btn', 'add-listing-btn', 'open-listing-form-from-page', 'add-listing-modal', 'property-detail-modal', 'delete-confirm-modal', 'investment', 'income', 'expenses', 'roi-result', 'roiChart'];
                ids.forEach(id => {
                    const camelCaseId = id.replace(/-(\w)/g, (_, letter) => letter.toUpperCase());
                    this.elements[camelCaseId] = document.getElementById(id);
                });
                this.elements.allPageSections = document.querySelectorAll('.page-content-section');
                this.elements.navLinks = document.querySelectorAll('.nav-link');
            },

            bindEvents() {
                if(this.elements.loadingOverlay) window.addEventListener('load', () => this.elements.loadingOverlay.classList.add('hidden'));
                
                if(this.elements.mobileMenuButton) {
                    this.elements.mobileMenuButton.addEventListener('click', () => {
                        if(this.elements.mobileMenu) this.elements.mobileMenu.classList.toggle('hidden');
                    });
                }
                
                if(this.elements.navLinks) {
                    this.elements.navLinks.forEach(link => {
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            this.showPage(link.getAttribute('href').substring(1));
                        });
                    });
                }

                window.addEventListener('popstate', (e) => this.showPage(e.state?.page || 'hero-section'));

                if(this.elements.langSwitcher) {
                    this.elements.langSwitcher.addEventListener('click', (e) => {
                        if(e.target.matches('.lang-btn')) this.setLanguage(e.target.dataset.lang);
                    });
                }

                if(this.elements.applyFilterBtn) {
                    this.elements.applyFilterBtn.addEventListener('click', () => this.filterAndRenderProperties());
                }

                const roiInputs = [this.elements.investment, this.elements.income, this.elements.expenses];
                 if (roiInputs.every(el => el)) {
                    roiInputs.forEach(input => {
                        input.addEventListener('input', () => this.calculateROI());
                    });
                }
                
                if(this.elements.addListingBtn) this.elements.addListingBtn.addEventListener('click', () => this.showModal(this.elements.addListingModal));
                if(this.elements.openListingFormFromPage) this.elements.openListingFormFromPage.addEventListener('click', () => this.showModal(this.elements.addListingModal));

                if(this.elements.addListingModal) {
                    this.elements.addListingModal.addEventListener('click', (e) => {
                        const cancelButton = this.elements.addListingModal.querySelector('#cancel-listing-btn');
                        if ((cancelButton && e.target === cancelButton) || e.target === this.elements.addListingModal) {
                            this.hideModal(this.elements.addListingModal);
                        }
                    });
                    const form = this.elements.addListingModal.querySelector('#submit-property-form');
                    if (form) form.addEventListener('submit', (e) => this.handlePropertySubmit(e));
                }
            },
            
            // ... Other methods ...
            setLanguage(lang) { /* unchanged */ },
            showNotification(message, type = 'success') { /* unchanged */ },
            showPage(pageId) { /* unchanged */ },
            renderPropertyCards(properties) { /* unchanged */ },
            showPropertyDetail(propId) { /* unchanged */ },
            showDeleteConfirmation(propId, propTitle) { /* unchanged */ },
            async handlePropertySubmit(event) { /* unchanged */ },
            calculateROI() { /* unchanged */ },
            populateFilters() { /* unchanged */ },
            filterAndRenderProperties() { /* unchanged */ },
            handleHeroSearch(e) { /* unchanged */ },
            showModal(modalEl) { if(modalEl) modalEl.classList.add('active'); },
            hideModal(modalEl) { if(modalEl) modalEl.classList.remove('active'); },
            initScrollAnimations() { /* unchanged */ }
        };

        App.init();
    });
</script>

</body>
</html>
